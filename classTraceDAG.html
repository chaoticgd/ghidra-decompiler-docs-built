<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: TraceDAG Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classTraceDAG-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TraceDAG Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Algorithm for selecting unstructured edges based an Directed Acyclic Graphs (DAG)  
 <a href="classTraceDAG.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="blockaction_8hh_source.html">blockaction.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc523c94f57b57f19832a0080d478c7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#adc523c94f57b57f19832a0080d478c7b">TraceDAG</a> (list&lt; <a class="el" href="classFloatingEdge.html">FloatingEdge</a> &gt; &amp;lg)</td></tr>
<tr class="memdesc:adc523c94f57b57f19832a0080d478c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the <b>visitcount</b> field of any <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> we have modified.  <a href="#adc523c94f57b57f19832a0080d478c7b">More...</a><br /></td></tr>
<tr class="separator:adc523c94f57b57f19832a0080d478c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a353ced99fd604015d988682b915296d9"><td class="memItemLeft" align="right" valign="top"><a id="a353ced99fd604015d988682b915296d9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#a353ced99fd604015d988682b915296d9">~TraceDAG</a> (void)</td></tr>
<tr class="memdesc:a353ced99fd604015d988682b915296d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a353ced99fd604015d988682b915296d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bfbd6888e04cc4688510f67464d8c89"><td class="memItemLeft" align="right" valign="top"><a id="a1bfbd6888e04cc4688510f67464d8c89"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#a1bfbd6888e04cc4688510f67464d8c89">addRoot</a> (<a class="el" href="classFlowBlock.html">FlowBlock</a> *root)</td></tr>
<tr class="memdesc:a1bfbd6888e04cc4688510f67464d8c89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a root <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> to the trace. <br /></td></tr>
<tr class="separator:a1bfbd6888e04cc4688510f67464d8c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d28fcd17f9782ecb53d790bf2b4264c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#a6d28fcd17f9782ecb53d790bf2b4264c">initialize</a> (void)</td></tr>
<tr class="memdesc:a6d28fcd17f9782ecb53d790bf2b4264c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the initial BranchPoint and BlockTrace objects.  <a href="#a6d28fcd17f9782ecb53d790bf2b4264c">More...</a><br /></td></tr>
<tr class="separator:a6d28fcd17f9782ecb53d790bf2b4264c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31c7a68e8e3380ff8b0d4a7af00cf2e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#a31c7a68e8e3380ff8b0d4a7af00cf2e4">pushBranches</a> (void)</td></tr>
<tr class="memdesc:a31c7a68e8e3380ff8b0d4a7af00cf2e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push the trace through, removing edges as necessary.  <a href="#a31c7a68e8e3380ff8b0d4a7af00cf2e4">More...</a><br /></td></tr>
<tr class="separator:a31c7a68e8e3380ff8b0d4a7af00cf2e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013a57ad89329ea07f99781442067190"><td class="memItemLeft" align="right" valign="top"><a id="a013a57ad89329ea07f99781442067190"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraceDAG.html#a013a57ad89329ea07f99781442067190">setFinishBlock</a> (<a class="el" href="classFlowBlock.html">FlowBlock</a> *bl)</td></tr>
<tr class="memdesc:a013a57ad89329ea07f99781442067190"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark an exit point not to trace beyond. <br /></td></tr>
<tr class="separator:a013a57ad89329ea07f99781442067190"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Algorithm for selecting unstructured edges based an Directed Acyclic Graphs (DAG) </p>
<p>With the exception of the back edges in loops, structured code tends to form a DAG. Within the DAG, all building blocks of structured code have a single node entry point and (at most) one exit block. Given root points, this class traces edges with this kind of structure. Paths can recursively split at any point, starting a new <em>active</em> BranchPoint, but the BranchPoint can't be <em>retired</em> until all paths emanating from its start either terminate or come back together at the same <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> node. Once a BranchPoint is retired, all the edges traversed from the start <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> to the end <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> are likely structurable. After pushing the traces as far as possible and retiring as much as possible, any <em>active</em> edge left is a candidate for an unstructured branch.</p>
<p>Ultimately this produces a list of <em>likely</em> <em>gotos</em>, which is used whenever the structuring algorithm (<a class="el" href="classActionBlockStructure.html" title="Structure control-flow using standard high-level code constructs. ">ActionBlockStructure</a>) gets stuck.</p>
<p>The tracing can be restricted to a <em>loopbody</em> by setting the top <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> of the loop as the root, and the loop exit block as the finish block. Additionally, any edges that exit the loop should be marked using <a class="el" href="classLoopBody.html#a24f6fd993c0e4fe0684f9fa4446e9e9c" title="Mark all the exits to this loop. ">LoopBody::setExitMarks()</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adc523c94f57b57f19832a0080d478c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc523c94f57b57f19832a0080d478c7b">&#9670;&nbsp;</a></span>TraceDAG()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TraceDAG::TraceDAG </td>
          <td>(</td>
          <td class="paramtype">list&lt; <a class="el" href="classFloatingEdge.html">FloatingEdge</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the <b>visitcount</b> field of any <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a> we have modified. </p>
<p>Construct given the container for likely unstructured edges</p>
<p>Prepare for a new trace using the provided storage for the likely unstructured edges that will be discovered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lg</td><td>is the container for likely unstructured edges </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6d28fcd17f9782ecb53d790bf2b4264c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d28fcd17f9782ecb53d790bf2b4264c">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TraceDAG::initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the initial BranchPoint and BlockTrace objects. </p>
<p>Given the registered root FlowBlocks, create the initial (virtual) BranchPoint and an associated BlockTrace for each root <a class="el" href="classFlowBlock.html" title="Description of a control-flow block containing PcodeOps. ">FlowBlock</a>. </p>

</div>
</div>
<a id="a31c7a68e8e3380ff8b0d4a7af00cf2e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31c7a68e8e3380ff8b0d4a7af00cf2e4">&#9670;&nbsp;</a></span>pushBranches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TraceDAG::pushBranches </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push the trace through, removing edges as necessary. </p>
<p>From the root BranchPoint, recursively push the trace. At any point where pushing is no longer possible, select an appropriate edge to remove and add it to the list of likely unstructured edges. Then continue pushing the trace. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="blockaction_8hh_source.html">blockaction.hh</a></li>
<li>blockaction.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
